var bencodeMenu = "base64_encode_menu";
var bdecodeMenu = "base64_decode_menu";
chrome.contextMenus.create(
    {
        id:bencodeMenu,
        contexts:["selection"],
        title:"Base64 Encode"
    }
),
chrome.contextMenus.create(
    {
        id:bdecodeMenu,
        contexts:["selection"],
        title:"Base64 Decode"
    }
);


chrome.contextMenus.onClicked.addListener(function(menu, t) {
    //gen qrcode
    if (menu.menuItemId === bencodeMenu) {
        chrome.tabs.sendMessage(t.id,
            {
                action:"updateSelection",
                selection:menu.selectionText,
                text:Base64.encode(menu.selectionText)
            }
        )

    }else if(menu.menuItemId === bdecodeMenu){
        chrome.tabs.sendMessage(t.id,
            {
                action:"updateSelection",
                selection:menu.selectionText,
                text:Base64.decode(menu.selectionText)
            }
        )
    }

});